define([],function(){function s(e){return t(e).split("/").reduce(function(e,t,n){return e.length===0||t!==".."?e.push(t):e.pop(),e},[]).join("/")}function o(e,t,i){t=s(t),i=s(i);if(e.match(r)||e.match(n))return e;e=s(e);var o=i.match(n),f=t.match(n);return f&&(!o||o[1]!=f[1]||o[2]!=f[2])?u(e,t):a(u(e,t),i)}function u(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));if(e.match(r)||e.match(n))return e;var i=t.split("/"),s=e.split("/");i.pop();while(curPart=s.shift())curPart==".."?i.pop():i.push(curPart);return i.join("/")}function a(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var e=/([^:])\/+/g,t=function(t){return t.replace(e,"$1/")},n=/[^\:\/]*:\/\/([^\/])*/,r=/^(\/|data:)/,f=function(e,t,n){var r=/@import\s*((?:"([^"]*)")|(?:'([^']*)'))|url\s*\(\s*(\s*(?:"([^"]*)")|(?:'([^']*)')|[^\)]*\s*)\s*\)/ig,i,s,e;while(i=r.exec(e)){s=i[3]||i[2]||i[5]||i[6]||i[4];var u;u=o(s,t,n);var a=i[5]||i[6]?1:0;e=e.substr(0,r.lastIndex-s.length-a-1)+u+e.substr(r.lastIndex-a-1),r.lastIndex=r.lastIndex+(u.length-s.length)}return e};return f.convertURIBase=o,f.absoluteURI=u,f.relativeURI=a,f});